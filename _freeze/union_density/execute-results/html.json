{
  "hash": "04b182f57066b7f1ee2e99779cf1c802",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Historical state union density\"\nauthor: 'Daniel Perez, EARN/EPI'\n---\n\n\n\n\nContact: [dperez\\@epi.org](mailto:%20dperez@epi.org)\n\n### This script uses Current Population Survey (CPS) microdata extracts from <https://microdata.epi.org/> to calculate union density from 1983-Present.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(here)\nlibrary(epiextractr)\n```\n:::\n\n\n\n\nLoad CPS data using [epiextractr](epi_microdata.qmd)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbasic <- load_basic(1983:2022, year, month, statefips, basicwgt, union, unmem, age, emp, selfemp, selfinc) %>%\n  filter(age>=16, emp==1) %>%\n  #remove self-employed and self-incorporated workers from sample\n  mutate(selfemp0 = ifelse(selfemp==1 & !is.na(selfemp), yes=1, no=0),\n         selfinc0 = ifelse(selfinc==1 & !is.na(selfinc), yes=1, no=0)) %>%\n  filter(selfemp0==0, selfinc0==0)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nUsing EPI CPS Basic Monthly Extracts, Version 1.0.61\n```\n\n\n:::\n:::\n\n\n\n\nCalculate US union density 1983--2022\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#US union members and union represented by year, 1983-2022\n\ndensity_us <- basic %>% \n  group_by(year) %>% \n  summarise(represented_share = weighted.mean(union, w=basicwgt/12, na.rm=TRUE),\n            rep_n = sum(union, na.rm=TRUE),\n            member_share = weighted.mean(unmem, w=basicwgt/12, na.rm=TRUE),\n            memb_n = sum(unmem, na.rm=TRUE),\n            wgt_memb = sum(unmem * basicwgt/12, na.rm=TRUE))\n\ndensity_us\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 40 × 6\n    year represented_share rep_n member_share memb_n wgt_memb\n   <int>             <dbl> <int>        <dbl>  <int>    <dbl>\n 1  1983           NaN         0        0.201  34258 4422628.\n 2  1984             0.216 38008        0.188  32921 4328307.\n 3  1985             0.205 36788        0.180  32185 4236957.\n 4  1986             0.199 35321        0.175  31013 4230555.\n 5  1987             0.192 34505        0.170  30488 4221013.\n 6  1988             0.190 32242        0.168  28406 4241194.\n 7  1989             0.186 32079        0.164  28261 4235755.\n 8  1990             0.182 34110        0.160  29898 4192916.\n 9  1991             0.181 32920        0.160  29051 4152415.\n10  1992             0.177 31725        0.157  28022 4098902.\n# ℹ 30 more rows\n```\n\n\n:::\n:::\n\n\n\n\nCalculate state level union representation, 1983--2022\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Union representation by year and state, 1983–Present\ndensity_state <- basic %>% \nsummarise(represented_share = weighted.mean(union, w=basicwgt/12, na.rm=TRUE),\n          .by = c(year, statefips)) %>%\n  \n  #Turn statefips labels into strings\n  mutate(statefips = haven::as_factor(statefips)) %>% \n  #sort by year and state\n  arrange(year, statefips) %>% \n  #reshape data\n  pivot_wider(id_cols = year, names_from = statefips, values_from = represented_share)\n\ndensity_state\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 40 × 52\n    year      AL      AK       AZ      AR      CA      CO      CT      DE\n   <int>   <dbl>   <dbl>    <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>\n 1  1983 NaN     NaN     NaN      NaN     NaN     NaN     NaN     NaN    \n 2  1984   0.179   0.279   0.120    0.120   0.248   0.146   0.222   0.193\n 3  1985   0.177   0.280   0.121    0.133   0.239   0.137   0.222   0.185\n 4  1986   0.181   0.267   0.109    0.123   0.231   0.148   0.207   0.190\n 5  1987   0.155   0.256   0.0825   0.133   0.223   0.138   0.200   0.180\n 6  1988   0.161   0.268   0.0863   0.117   0.216   0.124   0.205   0.167\n 7  1989   0.157   0.249   0.0877   0.121   0.218   0.113   0.193   0.173\n 8  1990   0.145   0.258   0.0941   0.121   0.209   0.120   0.196   0.168\n 9  1991   0.155   0.239   0.0979   0.125   0.206   0.118   0.200   0.185\n10  1992   0.162   0.221   0.0952   0.110   0.209   0.120   0.189   0.184\n# ℹ 30 more rows\n# ℹ 43 more variables: DC <dbl>, FL <dbl>, GA <dbl>, HI <dbl>, ID <dbl>,\n#   IL <dbl>, IN <dbl>, IA <dbl>, KS <dbl>, KY <dbl>, LA <dbl>, ME <dbl>,\n#   MD <dbl>, MA <dbl>, MI <dbl>, MN <dbl>, MS <dbl>, MO <dbl>, MT <dbl>,\n#   NE <dbl>, NV <dbl>, NH <dbl>, NJ <dbl>, NM <dbl>, NY <dbl>, NC <dbl>,\n#   ND <dbl>, OH <dbl>, OK <dbl>, OR <dbl>, PA <dbl>, RI <dbl>, SC <dbl>,\n#   SD <dbl>, TN <dbl>, TX <dbl>, UT <dbl>, VT <dbl>, VA <dbl>, WA <dbl>, …\n```\n\n\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}